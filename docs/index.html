<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2E5CFF">
    <title>알고PT Pro</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash" class="splash">
        <div class="splash-content">
            <div class="splash-icon">
                <svg viewBox="0 0 24 24" fill="white" width="64" height="64">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/>
                </svg>
            </div>
            <h1 class="splash-title">알고PT Pro</h1>
            <p class="splash-subtitle">주니어 치료사를 위한 AI 임상 파트너</p>
            <div class="splash-loader">
                <div class="loader-bar"></div>
            </div>
            <p class="splash-loading">임상 데이터를 불러오는 중...</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header id="header" class="header">
            <h1 id="header-title">알고PT Pro</h1>
        </header>

        <!-- Screens Container -->
        <main id="screens" class="screens">
            <!-- Home Screen -->
            <section id="screen-home" class="screen active">
                <div class="home-hero">
                    <h2>알고PT Pro</h2>
                    <p>AI 임상 파트너</p>
                </div>
                <div class="card">
                    <h3><span class="icon">⚡</span> 빠른 시작</h3>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="navigateTo('subjective')">
                            <span class="quick-icon">➕</span>
                            <span>새 평가<br>시작</span>
                        </button>
                        <button class="quick-btn green" onclick="navigateTo('cdss')">
                            <span class="quick-icon">🔍</span>
                            <span>AI<br>검색</span>
                        </button>
                        <button class="quick-btn orange" onclick="navigateTo('objective')">
                            <span class="quick-icon">🦾</span>
                            <span>ROM<br>검사</span>
                        </button>
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">🏥</span> Clinical Tools <span class="badge-new">PNF 정량화</span></h3>
                    <div class="tool-grid">
                        <button class="tool-btn blue" onclick="openTool('stopwatch')">
                            <span class="tool-icon">⏱️</span>
                            <span class="tool-label">보행 검사</span>
                            <span class="tool-sub">10MWT/TUG</span>
                        </button>
                        <button class="tool-btn purple" onclick="openTool('metronome')">
                            <span class="tool-icon">🎵</span>
                            <span class="tool-label">메트로놈</span>
                            <span class="tool-sub">Auditory Cue</span>
                        </button>
                        <button class="tool-btn green" onclick="openTool('cadence')">
                            <span class="tool-icon">🚶</span>
                            <span class="tool-label">보행수</span>
                            <span class="tool-sub">Cadence</span>
                        </button>
                        <button class="tool-btn orange" onclick="openTool('dualtask')">
                            <span class="tool-icon">🧠</span>
                            <span class="tool-label">이중과제</span>
                            <span class="tool-sub">Dual Task</span>
                        </button>
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">📋</span> 평가 워크플로우</h3>
                    <div class="workflow">
                        <div class="workflow-step active">
                            <div class="step-num">1</div>
                            <div class="step-info">
                                <strong>주관적 평가</strong>
                                <small>환자정보, 주호소, 통증</small>
                            </div>
                            <span class="step-badge">시작</span>
                        </div>
                        <div class="workflow-line"></div>
                        <div class="workflow-step">
                            <div class="step-num">2</div>
                            <div class="step-info">
                                <strong>객관적 평가</strong>
                                <small>MAS, MMT, ROM</small>
                            </div>
                        </div>
                        <div class="workflow-line"></div>
                        <div class="workflow-step">
                            <div class="step-num">3</div>
                            <div class="step-info">
                                <strong>사정</strong>
                                <small>AI 임상 추론</small>
                            </div>
                        </div>
                        <div class="workflow-line"></div>
                        <div class="workflow-step">
                            <div class="step-num">4</div>
                            <div class="step-info">
                                <strong>계획</strong>
                                <small>EMR용 SOAP 노트</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Subjective Screen -->
            <section id="screen-subjective" class="screen">
                <div class="card">
                    <h3><span class="icon">👤</span> 환자 정보</h3>
                    <div class="form-row">
                        <label>나이</label>
                        <div class="age-picker">
                            <button class="age-btn" onclick="changeAge(-1)">−</button>
                            <span id="age-value" class="age-value">50세</span>
                            <button class="age-btn" onclick="changeAge(1)">+</button>
                        </div>
                    </div>
                    <div class="form-row">
                        <label>성별</label>
                        <div class="gender-picker">
                            <button id="gender-m" class="gender-btn" onclick="setGender('M')">
                                <span>♂</span> 남성
                            </button>
                            <button id="gender-f" class="gender-btn" onclick="setGender('F')">
                                <span>♀</span> 여성
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3><span class="icon">🏥</span> 주호소 (C.C)</h3>
                    <div id="cc-selected" class="selected-info hidden">
                        <span class="icon">✓</span> <span id="cc-count">0</span>개 선택
                    </div>
                    <div id="cc-categories" class="category-list">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <div class="card">
                    <h3><span class="icon">💊</span> 통증 평가 (VAS)</h3>
                    <p class="hint">신체 부위를 탭한 후 통증 강도를 설정하세요</p>
                    <div class="pain-container">
                        <div class="body-map-container">
                            <svg id="body-map" viewBox="0 0 200 400" class="body-map">
                                <!-- Body outline -->
                                <ellipse cx="100" cy="30" rx="25" ry="28" class="body-part" data-part="머리"/>
                                <rect x="90" y="55" width="20" height="15" class="body-part" data-part="목"/>
                                <path d="M60 75 L140 75 L135 160 L65 160 Z" class="body-part" data-part="가슴"/>
                                <ellipse cx="50" cy="85" rx="12" ry="15" class="body-part" data-part="우측 어깨"/>
                                <ellipse cx="150" cy="85" rx="12" ry="15" class="body-part" data-part="좌측 어깨"/>
                                <rect x="35" y="95" width="18" height="50" rx="5" class="body-part" data-part="우측 팔꿈치"/>
                                <rect x="147" y="95" width="18" height="50" rx="5" class="body-part" data-part="좌측 팔꿈치"/>
                                <rect x="25" y="145" width="15" height="45" rx="4" class="body-part" data-part="우측 손목"/>
                                <rect x="160" y="145" width="15" height="45" rx="4" class="body-part" data-part="좌측 손목"/>
                                <ellipse cx="32" cy="200" rx="12" ry="15" class="body-part" data-part="우측 손"/>
                                <ellipse cx="168" cy="200" rx="12" ry="15" class="body-part" data-part="좌측 손"/>
                                <path d="M65 165 L135 165 L125 210 L75 210 Z" class="body-part" data-part="허리"/>
                                <ellipse cx="82" cy="225" rx="18" ry="20" class="body-part" data-part="우측 고관절"/>
                                <ellipse cx="118" cy="225" rx="18" ry="20" class="body-part" data-part="좌측 고관절"/>
                                <rect x="70" y="245" width="22" height="70" rx="8" class="body-part" data-part="우측 무릎"/>
                                <rect x="108" y="245" width="22" height="70" rx="8" class="body-part" data-part="좌측 무릎"/>
                                <rect x="72" y="320" width="18" height="50" rx="6" class="body-part" data-part="우측 발목"/>
                                <rect x="110" y="320" width="18" height="50" rx="6" class="body-part" data-part="좌측 발목"/>
                                <ellipse cx="81" cy="380" rx="14" ry="10" class="body-part" data-part="우측 발"/>
                                <ellipse cx="119" cy="380" rx="14" ry="10" class="body-part" data-part="좌측 발"/>
                            </svg>
                        </div>
                        <div class="pain-list">
                            <h4>통증 부위</h4>
                            <div id="pain-locations">
                                <p class="empty-hint">신체를 탭하여 추가</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Objective Screen -->
            <section id="screen-objective" class="screen">
                <div class="tabs">
                    <button class="tab active" onclick="switchObjectiveTab('mas')">MAS</button>
                    <button class="tab" onclick="switchObjectiveTab('mmt')">MMT</button>
                    <button class="tab" onclick="switchObjectiveTab('rom')">ROM</button>
                </div>

                <!-- MAS Tab -->
                <div id="tab-mas" class="tab-content active">
                    <div class="side-selector">
                        <span>측정 부위:</span>
                        <button id="mas-side-r" class="side-btn active" onclick="setMasSide('R')">우측</button>
                        <button id="mas-side-l" class="side-btn" onclick="setMasSide('L')">좌측</button>
                    </div>
                    <div class="info-card">
                        <h4>수정 애쉬워스 척도 (MAS)</h4>
                        <div class="grade-legend">
                            <span class="grade-item"><b>G0</b> 정상</span>
                            <span class="grade-item"><b>G1</b> 약간 증가</span>
                            <span class="grade-item"><b>G1+</b> 걸림</span>
                            <span class="grade-item"><b>G2</b> 현저한 증가</span>
                            <span class="grade-item"><b>G3</b> 상당한 증가</span>
                            <span class="grade-item"><b>G4</b> 강직</span>
                        </div>
                    </div>
                    <div id="mas-list" class="assessment-list">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <!-- MMT Tab -->
                <div id="tab-mmt" class="tab-content">
                    <div class="quick-action-bar">
                        <button class="action-btn green" onclick="setAllMmtNormal()">✓ 전체 정상</button>
                        <button class="action-btn gray" onclick="clearAllMmt()">초기화</button>
                    </div>
                    <div class="side-selector">
                        <span>측정 부위:</span>
                        <button id="mmt-side-r" class="side-btn active" onclick="setMmtSide('R')">우측</button>
                        <button id="mmt-side-l" class="side-btn" onclick="setMmtSide('L')">좌측</button>
                    </div>
                    <div id="mmt-list" class="assessment-list">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <!-- ROM Tab -->
                <div id="tab-rom" class="tab-content">
                    <div class="rom-controls">
                        <div class="rom-selectors">
                            <select id="rom-joint-select" class="joint-select" onchange="selectRomJoint(this.value)">
                                <option value="shoulder">어깨</option>
                                <option value="elbow">팔꿈치</option>
                                <option value="wrist">손목</option>
                                <option value="hip">고관절</option>
                                <option value="knee">무릎</option>
                                <option value="ankle">발목</option>
                            </select>
                            <div class="side-toggle-inline">
                                <button id="rom-side-r" class="side-btn-sm active" onclick="setRomSide('R')">우</button>
                                <button id="rom-side-l" class="side-btn-sm" onclick="setRomSide('L')">좌</button>
                            </div>
                        </div>
                        <button class="wnl-all-btn" onclick="setAllRomWnl()">전체 WNL</button>
                    </div>
                    <div id="rom-movement-list" class="rom-movement-grid">
                        <!-- Generated by JS -->
                    </div>
                    <div class="card rom-card">
                        <h3 id="rom-movement-title">어깨 굴곡</h3>
                        <p id="rom-normal-range" class="hint">정상범위: 0° - 180°</p>
                        <button id="rom-wnl-btn" class="wnl-btn" onclick="toggleRomWnl()">
                            <span class="wnl-check">○</span> 정상범위 (WNL)
                        </button>
                        <div id="rom-slider-container" class="rom-slider-container">
                            <div class="rom-display">
                                <div class="mannequin-container">
                                    <svg id="rom-mannequin" viewBox="0 0 200 300" class="mannequin">
                                        <!-- Head -->
                                        <ellipse cx="100" cy="25" rx="18" ry="22" fill="#2E5CFF" opacity="0.8"/>
                                        <!-- Neck -->
                                        <rect x="92" y="45" width="16" height="12" fill="#2E5CFF" opacity="0.8"/>
                                        <!-- Torso -->
                                        <path d="M65 60 L135 60 L130 140 L70 140 Z" fill="#2E5CFF" opacity="0.8"/>
                                        <!-- Left Arm (static) -->
                                        <g id="left-arm-group">
                                            <rect x="135" y="65" width="14" height="45" rx="5" fill="#2E5CFF" opacity="0.6"/>
                                            <rect x="138" y="110" width="12" height="40" rx="4" fill="#2E5CFF" opacity="0.6"/>
                                        </g>
                                        <!-- Right Arm (animated) -->
                                        <g id="right-arm-group" transform-origin="65 70">
                                            <rect x="51" y="65" width="14" height="45" rx="5" fill="#00C896"/>
                                            <circle cx="58" cy="110" r="6" fill="#009670"/>
                                            <rect id="right-forearm" x="52" y="110" width="12" height="40" rx="4" fill="#00C896"/>
                                        </g>
                                        <!-- Pelvis -->
                                        <path d="M70 145 L130 145 L120 175 L80 175 Z" fill="#2E5CFF" opacity="0.8"/>
                                        <!-- Legs -->
                                        <rect x="75" y="180" width="18" height="60" rx="6" fill="#2E5CFF" opacity="0.8"/>
                                        <rect x="107" y="180" width="18" height="60" rx="6" fill="#2E5CFF" opacity="0.8"/>
                                        <rect x="77" y="245" width="14" height="45" rx="5" fill="#2E5CFF" opacity="0.8"/>
                                        <rect x="109" y="245" width="14" height="45" rx="5" fill="#2E5CFF" opacity="0.8"/>
                                    </svg>
                                </div>
                                <div class="angle-control">
                                    <div class="angle-dial">
                                        <svg viewBox="0 0 150 150" class="dial-svg">
                                            <circle cx="75" cy="75" r="60" fill="none" stroke="#E8ECF2" stroke-width="10"/>
                                            <circle id="dial-progress" cx="75" cy="75" r="60" fill="none" stroke="#00C896" stroke-width="10"
                                                stroke-dasharray="377" stroke-dashoffset="377" stroke-linecap="round"
                                                transform="rotate(-90 75 75)"/>
                                            <circle id="dial-thumb" cx="75" cy="15" r="12" fill="white" stroke="#00C896" stroke-width="3" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2))"/>
                                        </svg>
                                        <div id="angle-value" class="angle-value">0°</div>
                                    </div>
                                    <input type="range" id="rom-slider" class="rom-range" min="0" max="180" value="0"
                                        oninput="updateRomAngle(this.value)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CDSS Screen -->
            <section id="screen-cdss" class="screen">
                <div class="card">
                    <div class="cdss-header">
                        <div class="cdss-icon">🧠</div>
                        <div>
                            <h3>근거 기반 검색</h3>
                            <p class="hint">임상 가이드라인 및 중재법 검색</p>
                        </div>
                    </div>
                    <button class="primary-btn full-width" onclick="searchInterventions()">
                        🔍 이 케이스에 맞는 중재법 검색
                    </button>
                </div>

                <div class="card">
                    <h3><span class="icon">⚡</span> 질환별 빠른 검색</h3>
                    <div id="condition-chips" class="chips">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <div id="cdss-loading" class="card hidden">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">임상 데이터를 분석 중입니다...</p>
                    <p class="loading-sub">근거 기반 가이드라인 검색 중...</p>
                </div>

                <div id="cdss-result" class="card hidden">
                    <h3><span class="icon">📄</span> 임상 권고사항</h3>
                    <div id="result-content" class="result-content"></div>
                    <button class="secondary-btn full-width" onclick="generateSoapNote()">
                        📝 SOAP 노트 생성
                    </button>
                </div>

                <div id="soap-note" class="card hidden">
                    <div class="soap-header">
                        <h3><span class="icon">📋</span> SOAP 노트</h3>
                        <button class="copy-btn" onclick="copySoapNote()">
                            📋 EMR 복사
                        </button>
                    </div>
                    <pre id="soap-content" class="soap-content"></pre>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="navigateTo('home')">
                <span class="nav-icon">🏠</span>
                <span>홈</span>
            </button>
            <button class="nav-item" onclick="navigateTo('subjective')">
                <span class="nav-icon">👤</span>
                <span>주관적</span>
            </button>
            <button class="nav-item" onclick="navigateTo('objective')">
                <span class="nav-icon">📊</span>
                <span>객관적</span>
            </button>
            <button class="nav-item" onclick="navigateTo('cdss')">
                <span class="nav-icon">🧠</span>
                <span>AI 지원</span>
            </button>
        </nav>
    </div>

    <!-- VAS Modal -->
    <div id="vas-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-handle"></div>
            <h3 id="vas-part-name">부위명</h3>
            <p class="hint">통증 강도 설정 (VAS)</p>
            <div class="vas-slider-container">
                <svg viewBox="0 0 220 120" class="vas-arc">
                    <defs>
                        <linearGradient id="vas-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#4CAF50"/>
                            <stop offset="50%" style="stop-color:#FFEB3B"/>
                            <stop offset="100%" style="stop-color:#FF5722"/>
                        </linearGradient>
                    </defs>
                    <path d="M 20 100 A 90 90 0 0 1 200 100" fill="none" stroke="#E8ECF2" stroke-width="16" stroke-linecap="round"/>
                    <path id="vas-arc-progress" d="M 20 100 A 90 90 0 0 1 200 100" fill="none" stroke="url(#vas-gradient)" stroke-width="16" stroke-linecap="round" stroke-dasharray="283" stroke-dashoffset="283"/>
                    <circle id="vas-thumb" cx="20" cy="100" r="14" fill="white" stroke="#4CAF50" stroke-width="3" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3))"/>
                </svg>
                <div id="vas-value" class="vas-value">0</div>
            </div>
            <input type="range" id="vas-range" class="vas-range" min="0" max="10" value="0" oninput="updateVasValue(this.value)">
            <div class="vas-labels">
                <span class="vas-low">통증 없음</span>
                <span class="vas-high">극심한 통증</span>
            </div>
            <div class="modal-buttons">
                <button class="secondary-btn" onclick="removeVasPain()">삭제</button>
                <button class="primary-btn" onclick="saveVasPain()">저장</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden"></div>

    <!-- Clinical Tool Screens -->
    <!-- Stopwatch Screen -->
    <div id="tool-stopwatch" class="tool-screen hidden">
        <div class="tool-header">
            <button class="tool-back-btn" onclick="closeTool()">←</button>
            <div class="tool-title">Clinical Stopwatch<small>고정밀 임상 타이머</small></div>
            <div style="width:40px"></div>
        </div>
        <div class="tool-content">
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setStopwatchMode(0)">10MWT</button>
                <button class="mode-btn" onclick="setStopwatchMode(1)">TUG</button>
            </div>
            <div id="stopwatch-timer" class="timer-display">00:00.00</div>
            <div id="stopwatch-result" class="tool-result hidden">
                <div class="tool-result-label">보행 속도</div>
                <div id="stopwatch-speed" class="tool-result-value">0.00 m/s</div>
                <div id="stopwatch-badge" class="tool-result-badge success"></div>
            </div>
        </div>
        <div class="tool-controls">
            <div id="stopwatch-start-controls">
                <button class="tool-button start" onclick="startStopwatch()">▶  시작</button>
            </div>
            <div id="stopwatch-running-controls" class="hidden">
                <button class="tool-button stop" onclick="stopStopwatch()">⏹  정지</button>
                <button class="tool-button reset" onclick="resetStopwatch()">🔄  초기화</button>
            </div>
            <div id="stopwatch-paused-controls" class="hidden">
                <div class="tool-row">
                    <button class="tool-button start" onclick="startStopwatch()">▶  재개</button>
                    <button class="tool-button save" onclick="saveStopwatch()">💾  저장</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Metronome Screen -->
    <div id="tool-metronome" class="tool-screen hidden">
        <div class="tool-header">
            <button class="tool-back-btn" onclick="closeTool()">←</button>
            <div class="tool-title">Pro Metronome<small>보행 훈련 청각 큐</small></div>
            <div style="width:40px"></div>
        </div>
        <div class="tool-content">
            <div class="bpm-display">
                <div id="metronome-bpm" class="bpm-value">60</div>
                <div class="bpm-label">BPM</div>
            </div>
            <div class="bpm-controls">
                <button class="bpm-btn" onclick="changeBpm(-5)">-5</button>
                <button class="bpm-btn" onclick="changeBpm(-1)">-1</button>
                <button class="bpm-btn" onclick="changeBpm(1)">+1</button>
                <button class="bpm-btn" onclick="changeBpm(5)">+5</button>
            </div>
            <input type="range" id="bpm-slider" class="bpm-slider" min="20" max="240" value="60" oninput="setBpm(this.value)">
            <div class="tool-settings">
                <div class="tool-settings-title">⚙️ 프리셋</div>
                <div style="display:flex;gap:8px;flex-wrap:wrap">
                    <button class="mode-btn" onclick="setBpm(40)" style="flex:1">40</button>
                    <button class="mode-btn" onclick="setBpm(60)" style="flex:1">60</button>
                    <button class="mode-btn" onclick="setBpm(90)" style="flex:1">90</button>
                    <button class="mode-btn" onclick="setBpm(120)" style="flex:1">120</button>
                </div>
            </div>
        </div>
        <div class="tool-controls">
            <button id="metronome-btn" class="tool-button start" onclick="toggleMetronome()">▶  시작</button>
        </div>
    </div>

    <!-- Cadence Calculator Screen -->
    <div id="tool-cadence" class="tool-screen hidden">
        <div class="tool-header">
            <button class="tool-back-btn" onclick="closeTool()">←</button>
            <div class="tool-title">Cadence Calculator<small>실시간 보행수 측정</small></div>
            <div style="width:40px"></div>
        </div>
        <div class="tool-content">
            <div class="tool-result">
                <div class="tool-result-label">Steps Per Minute</div>
                <div id="cadence-spm" class="tool-result-value">0</div>
                <div id="cadence-badge" class="tool-result-badge">측정 대기</div>
            </div>
            <button class="tap-area" onclick="tapCadence()">
                TAP
            </button>
            <p style="text-align:center;opacity:0.7;font-size:14px">환자의 발걸음에 맞춰 탭하세요</p>
            <div class="tool-info">
                <div class="tool-info-title">📊 해석 기준</div>
                <p>• 100-130 SPM: 정상 보행<br>• &gt;130 SPM: 빠른 보행<br>• 80-100 SPM: 느린 보행<br>• &lt;80 SPM: 매우 느린 보행</p>
            </div>
        </div>
        <div class="tool-controls">
            <button class="tool-button reset" onclick="resetCadence()">🔄  초기화</button>
        </div>
    </div>

    <!-- Dual Task Screen -->
    <div id="tool-dualtask" class="tool-screen brown hidden">
        <div class="tool-header">
            <button class="tool-back-btn" onclick="closeTool()">←</button>
            <div class="tool-title">Dual Task Generator<small>인지-운동 이중 과제</small></div>
            <div style="width:40px"></div>
        </div>
        <div class="tool-content">
            <div class="mode-selector">
                <button class="mode-btn warning active" onclick="setDualTaskMode(0)">🔢 산수</button>
                <button class="mode-btn warning" onclick="setDualTaskMode(1)">💬 단어</button>
                <button class="mode-btn warning" onclick="setDualTaskMode(2)">🎨 색깔</button>
            </div>
            <div id="dualtask-display" class="question-display">
                <div style="font-size:64px">🧠</div>
                <p style="opacity:0.7;margin-top:16px">시작 버튼을 눌러주세요</p>
            </div>
            <div class="tool-settings">
                <div class="tool-settings-title">⚙️ 설정</div>
                <div class="setting-row">
                    <label>문제 간격</label>
                    <span id="dualtask-interval-display">5초</span>
                </div>
                <input type="range" id="dualtask-interval" min="3" max="15" value="5" oninput="setDualTaskInterval(this.value)">
            </div>
            <div class="tool-info">
                <div class="tool-info-title" id="dualtask-mode-title">💡 Serial 7s Test</div>
                <p id="dualtask-mode-desc">100에서 시작하여 7씩 빼는 계산을 합니다. 인지 기능 평가에 널리 사용됩니다.</p>
            </div>
        </div>
        <div class="tool-controls">
            <div id="dualtask-start-controls">
                <button class="tool-button start" onclick="startDualTask()">▶  시작</button>
            </div>
            <div id="dualtask-running-controls" class="hidden">
                <div class="tool-row">
                    <button class="tool-button reset" onclick="showDualTaskAnswer()">👁️ 정답</button>
                    <button class="tool-button save" onclick="nextDualTask()">⏭️ 다음</button>
                </div>
                <button class="tool-button stop" onclick="stopDualTask()">⏹ 정지</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
